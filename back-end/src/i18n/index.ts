/**
 * i18n helper for backend responses.
 * Supports English (en) and Farsi (fa) using simple dictionaries.
 */
export type Lang = 'en' | 'fa';

const dict = {
  en: {
    'health.ok': 'Accounting service is healthy',
    'fiscalYears.list': 'Fiscal years fetched',
    'fiscalYears.fetchOne': 'Fiscal year fetched',
    'fiscalYears.created': 'Fiscal year created',
    'fiscalYears.updated': 'Fiscal year updated',
    'fiscalYears.closed': 'Fiscal year closed',
    'fiscalYears.openedNext': 'Next fiscal year opened',
    'fiscalYears.opened': 'Fiscal year opened',
    'fiscalYears.alreadyOpen': 'Fiscal year is already open',
    'fiscalYears.mustBeClosed': 'Fiscal year must be closed before opening next',
    'fiscalYears.nextAlreadyExists': 'Next fiscal year already exists',
    'fiscalYears.notFound': 'Fiscal year not found',
    'fiscalYears.invalidRange': 'Start date must be before end date',
    'fiscalYears.deleted': 'Fiscal year deleted',
    'fiscalYears.hasDocuments': 'Cannot delete: fiscal year has documents',
    'fiscalYears.cannotEditDatesWithDocuments': 'Cannot edit dates: fiscal year has documents',
    'journal.created': 'Journal draft created',
    'journal.posted': 'Journal posted successfully',
    'error.unbalanced': 'Journal is not balanced',
    'error.generic': 'Unexpected server error',
    'error.invalidInput': 'Invalid input',
    // Auth messages
    'auth.invalidMobile': 'Invalid mobile number',
    'auth.otpSent': 'Verification code sent',
    'auth.tooManyRequests': 'Please wait a bit and try again',
    'auth.codeExpired': 'Verification code expired',
    'auth.wrongCode': 'Incorrect verification code',
    'auth.verified': 'Login successful',
    'auth.invalidToken': 'Invalid or expired token',
    'auth.refreshed': 'Token refreshed successfully',
    'auth.loggedOut': 'Logged out successfully',
    // Accounts messages (Phase 2)
    'accounts.list': 'Accounts fetched',
    'accounts.created': 'Account created',
    'accounts.updated': 'Account updated',
    'accounts.deleted': 'Account deleted',
    'accounts.notFound': 'Account not found',
    'accounts.duplicateCode': 'Account code already exists',
    'accounts.tree': 'Account tree built',
    // Details messages (Phase 2+)
    'details.list': 'Details fetched',
    'details.fetchOne': 'Detail fetched',
    'details.created': 'Detail created',
    'details.updated': 'Detail updated',
    'details.deleted': 'Detail deleted',
    'details.notFound': 'Detail not found',
    'details.duplicateCode': 'Detail code already exists',
    'details.invalidWidth': 'Detail code must be 4 digits',
    'details.noPrefix': 'Detail code must have no prefix',
    'details.suggested': 'Suggested next detail code',
    'details.linksFetched': 'Linked detail levels fetched',
    'details.linkMustBeLeaf': 'Links must target leaf detail levels',
    'details.linkedExists': 'Cannot delete: detail has linked detail levels',
    // Codes messages (Group → General → Specific)
    'codes.list': 'Codes fetched',
    'codes.fetchOne': 'Code fetched',
    'codes.created': 'Code created',
    'codes.updated': 'Code updated',
    'codes.deleted': 'Code deleted',
    'codes.notFound': 'Code not found',
    'codes.duplicateCode': 'Code already exists',
    'codes.invalidKind': "Kind must be 'group', 'general' or 'specific'",
    'codes.invalidParent': 'Invalid parent for this kind',
    'codes.invalidNature': 'Nature must be 0 (Debitor) or 1 (Creditor)',
    'codes.tree': 'Codes tree built',
    // Journals messages (Phase 2)
    'journals.list': 'Journals fetched',
    'journals.fetchOne': 'Journal fetched',
    'journals.created': 'Journal draft created',
    'journals.updated': 'Journal updated',
    'journals.posted': 'Journal posted successfully',
    'journals.reversed': 'Journal reversed successfully',
    'journals.deleted': 'Journal deleted',
    'journals.notFound': 'Journal not found',
    'journals.unbalanced': 'Journal is not balanced',
    'journals.cannotModifyPosted': 'Posted journal cannot be modified',
    'journals.cannotDeletePosted': 'Posted journal cannot be deleted',
    'journals.cannotReverseDraft': 'Only posted journals can be reversed',
    'journals.duplicateRefNo': 'Reference number already exists in this fiscal year',
    'journals.autoNewYorkCreated': 'New York journal created',
    'journals.autoNewYorkMissingCodes': 'Required codes for New York journal missing',
    'costCenters.notFound': 'Cost center not found',
    // Products messages (Phase 2)
    'products.list': 'Products fetched',
    'products.created': 'Product created',
    'products.updated': 'Product updated',
    'products.deleted': 'Product deleted',
    'products.notFound': 'Product not found',
    'products.duplicateSku': 'Product SKU already exists',
    // Parties messages (Phase 2)
    'parties.list': 'Parties fetched',
    'parties.created': 'Party created',
    'parties.updated': 'Party updated',
    'parties.deleted': 'Party deleted',
    'parties.notFound': 'Party not found',
    'parties.duplicateCode': 'Party code already exists',
    // Warehouses messages (Phase 3)
    'warehouses.list': 'Warehouses fetched',
    'warehouses.created': 'Warehouse created',
    'warehouses.updated': 'Warehouse updated',
    'warehouses.deleted': 'Warehouse deleted',
    'warehouses.notFound': 'Warehouse not found',
    'warehouses.duplicateCode': 'Warehouse code already exists',
    // Invoices messages (Phase 4)
    'invoices.list': 'Invoices fetched',
    'invoices.fetchOne': 'Invoice fetched',
    'invoices.created': 'Invoice created',
    'invoices.updated': 'Invoice updated',
    'invoices.deleted': 'Invoice deleted',
    'invoices.notFound': 'Invoice not found',
    'invoices.cannotModifyPosted': 'Posted invoice cannot be modified',
    'invoices.cannotDeletePosted': 'Posted invoice cannot be deleted',
    'invoices.posted': 'Invoice posted successfully',
    'invoices.missingAccounts': 'Posting accounts mapping is required',
    // Inventory messages (Phase 4)
    'inventory.transactions.list': 'Inventory transactions fetched',
    'inventory.autoPosted': 'Inventory auto-posted for invoice',
    'inventory.invalidWarehouse': 'Warehouse required for inventory posting',
    // Reports messages (Phase 5)
    'reports.trialBalance.fetched': 'Trial balance computed',
    'reports.ledger.fetched': 'Ledger fetched',
    'reports.balanceSheet.fetched': 'Balance sheet computed',
    'reports.profitLoss.fetched': 'Profit & loss computed',
    'reports.journalsPivotRaw.fetched': 'Journals pivot raw fetched',
    // Detail Levels messages
    'detailLevels.list': 'Detail levels fetched',
    'detailLevels.fetchOne': 'Detail level fetched',
    'detailLevels.created': 'Detail level created',
    'detailLevels.updated': 'Detail level updated',
    'detailLevels.deleted': 'Detail level deleted',
    'detailLevels.notFound': 'Detail level not found',
    'detailLevels.duplicateCode': 'Detail level code already exists',
    'detailLevels.tree': 'Detail levels tree built',
    'detailLevels.specificRequired': "Root nodes must link to a 'specific' code",
    'detailLevels.rootOnlyLink': 'Only root nodes may link to a specific code',
    'detailLevels.cycle': 'Parent assignment would create a cycle',
    'detailLevels.hasChildren': 'Cannot delete: node has children',
    'detailLevels.linkedExists': 'Cannot delete: detail level is linked to details',
  },
  fa: {
    'health.ok': 'سرویس حسابداری سالم است',
    'fiscalYears.list': 'سال‌های مالی بازیابی شد',
    'fiscalYears.fetchOne': 'سال مالی بازیابی شد',
    'fiscalYears.created': 'سال مالی ایجاد شد',
    'fiscalYears.updated': 'سال مالی به‌روزرسانی شد',
    'fiscalYears.closed': 'سال مالی بسته شد',
    'fiscalYears.openedNext': 'سال مالی بعدی باز شد',
    'fiscalYears.opened': 'سال مالی باز شد',
    'fiscalYears.alreadyOpen': 'سال مالی از قبل باز است',
    'fiscalYears.mustBeClosed': 'برای باز کردن سال بعد، سال جاری باید بسته شود',
    'fiscalYears.nextAlreadyExists': 'سال مالی بعدی قبلاً وجود دارد',
    'fiscalYears.notFound': 'سال مالی پیدا نشد',
    'fiscalYears.invalidRange': 'تاریخ شروع باید قبل از تاریخ پایان باشد',
    'fiscalYears.deleted': 'سال مالی حذف شد',
    'fiscalYears.hasDocuments': 'حذف ممکن نیست: سال مالی دارای سند است',
    'fiscalYears.cannotEditDatesWithDocuments': 'ویرایش تاریخ‌ها ممکن نیست: سال مالی دارای سند است',
    'journal.created': 'سند پیش‌نویس ایجاد شد',
    'journal.posted': 'سند با موفقیت پست شد',
    'error.unbalanced': 'سند حسابداری بالانس نیست',
    'error.generic': 'خطای غیرمنتظره در سرور رخ داد',
    'error.invalidInput': 'ورودی نامعتبر است',
    // Auth messages
    'auth.invalidMobile': 'شماره موبایل نامعتبر است',
    'auth.otpSent': 'کد تایید ارسال شد',
    'auth.tooManyRequests': 'لطفاً کمی صبر کنید و دوباره تلاش کنید',
    'auth.codeExpired': 'کد تایید منقضی شده است',
    'auth.wrongCode': 'کد تایید اشتباه است',
    'auth.verified': 'ورود با موفقیت انجام شد',
    'auth.invalidToken': 'توکن نامعتبر یا منقضی است',
    'auth.refreshed': 'توکن با موفقیت به‌روزرسانی شد',
    'auth.loggedOut': 'خروج با موفقیت انجام شد',
    // Accounts messages (Phase 2)
    'accounts.list': 'حساب‌ها بازیابی شدند',
    'accounts.created': 'حساب ایجاد شد',
    'accounts.updated': 'حساب به‌روزرسانی شد',
    'accounts.deleted': 'حساب حذف شد',
    'accounts.notFound': 'حساب پیدا نشد',
    'accounts.duplicateCode': 'کد حساب از قبل وجود دارد',
    'accounts.tree': 'درخت حساب‌ها ساخته شد',
    // Details messages (Phase 2+)
    'details.list': 'جزئیات بازیابی شد',
    'details.fetchOne': 'جزئیات بازیابی شد',
    'details.created': 'جزئیات ایجاد شد',
    'details.updated': 'جزئیات به‌روزرسانی شد',
    'details.deleted': 'جزئیات حذف شد',
    'details.notFound': 'جزئیات پیدا نشد',
    'details.duplicateCode': 'کد جزئیات از قبل وجود دارد',
    'details.invalidWidth': 'کد جزئیات باید ۴ رقمی باشد',
    'details.noPrefix': 'کد جزئیات نباید پیشوند داشته باشد',
    'details.suggested': 'کد بعدی جزئیات پیشنهاد شد',
    'details.linksFetched': 'سطوح جزئیات لینک‌شده بازیابی شد',
    'details.linkMustBeLeaf': 'لینک‌ها باید به گره برگ (بدون فرزند) باشند',
    'details.linkedExists': 'حذف ممکن نیست: جزئیات به سطوح جزئیات لینک شده است',
    // Codes messages (گروه → عمومی → اختصاصی)
    'codes.list': 'کدها بازیابی شدند',
    'codes.fetchOne': 'کد بازیابی شد',
    'codes.created': 'کد ایجاد شد',
    'codes.updated': 'کد به‌روزرسانی شد',
    'codes.deleted': 'کد حذف شد',
    'codes.notFound': 'کد پیدا نشد',
    'codes.duplicateCode': 'کد از قبل وجود دارد',
    'codes.invalidKind': "نوع باید 'گروه'، 'عمومی' یا 'اختصاصی' باشد",
    'codes.invalidParent': 'والد برای این نوع نامعتبر است',
    'codes.invalidNature': 'ماهیت باید ۰ (بستانکار) یا ۱ (بدهکار) باشد',
    'codes.tree': 'درخت کدها ساخته شد',
    // Journals messages (Phase 2)
    'journals.list': 'سندها بازیابی شدند',
    'journals.fetchOne': 'سند بازیابی شد',
    'journals.created': 'سند پیش‌نویس ایجاد شد',
    'journals.updated': 'سند به‌روزرسانی شد',
    'journals.posted': 'سند با موفقیت پست شد',
    'journals.reversed': 'سند با موفقیت برگشت شد',
    'journals.deleted': 'سند حذف شد',
    'journals.notFound': 'سند پیدا نشد',
    'journals.unbalanced': 'سند حسابداری بالانس نیست',
    'journals.cannotModifyPosted': 'سند پست‌شده قابل ویرایش نیست',
    'journals.cannotDeletePosted': 'سند پست‌شده قابل حذف نیست',
    'journals.cannotReverseDraft': 'فقط سندهای پست‌شده قابل برگشت هستند',
    'journals.duplicateRefNo': 'شماره سند در این سال مالی از قبل وجود دارد',
    'journals.autoNewYorkCreated': 'سند نیویورک ایجاد شد',
    'journals.autoNewYorkMissingCodes': 'کدهای لازم برای سند نیویورک موجود نیست',
    'costCenters.notFound': 'مرکز هزینه پیدا نشد',
    // Products messages (Phase 2)
    'products.list': 'محصولات بازیابی شدند',
    'products.created': 'محصول ایجاد شد',
    'products.updated': 'محصول به‌روزرسانی شد',
    'products.deleted': 'محصول حذف شد',
    'products.notFound': 'محصول پیدا نشد',
    'products.duplicateSku': 'شناسه کالا (SKU) از قبل وجود دارد',
    // Parties messages (Phase 2)
    'parties.list': 'اشخاص بازیابی شدند',
    'parties.created': 'شخص ایجاد شد',
    'parties.updated': 'شخص به‌روزرسانی شد',
    'parties.deleted': 'شخص حذف شد',
    'parties.notFound': 'شخص پیدا نشد',
    'parties.duplicateCode': 'کد شخص از قبل وجود دارد',
    // Warehouses messages (Phase 3)
    'warehouses.list': 'انبارها بازیابی شدند',
    'warehouses.created': 'انبار ایجاد شد',
    'warehouses.updated': 'انبار به‌روزرسانی شد',
    'warehouses.deleted': 'انبار حذف شد',
    'warehouses.notFound': 'انبار پیدا نشد',
    'warehouses.duplicateCode': 'کد انبار از قبل وجود دارد',
    // Invoices messages (Phase 4)
    'invoices.list': 'فاکتورها بازیابی شدند',
    'invoices.fetchOne': 'فاکتور بازیابی شد',
    'invoices.created': 'فاکتور ایجاد شد',
    'invoices.updated': 'فاکتور به‌روزرسانی شد',
    'invoices.deleted': 'فاکتور حذف شد',
    'invoices.notFound': 'فاکتور پیدا نشد',
    'invoices.cannotModifyPosted': 'فاکتور پست‌شده قابل ویرایش نیست',
    'invoices.cannotDeletePosted': 'فاکتور پست‌شده قابل حذف نیست',
    'invoices.posted': 'فاکتور با موفقیت پست شد',
    'invoices.missingAccounts': 'نقشه حساب‌ها برای پست کردن لازم است',
    // Inventory messages (Phase 4)
    'inventory.transactions.list': 'تراکنش‌های انبار بازیابی شدند',
    'inventory.autoPosted': 'انبار به‌صورت خودکار برای فاکتور پست شد',
    'inventory.invalidWarehouse': 'برای پست انبار، انبار لازم است',
    // Reports messages (Phase 5)
    'reports.trialBalance.fetched': 'تراز آزمایشی محاسبه شد',
    'reports.ledger.fetched': 'دفتر کل بازیابی شد',
    'reports.balanceSheet.fetched': 'ترازنامه محاسبه شد',
    'reports.profitLoss.fetched': 'سود و زیان محاسبه شد',
    'reports.journalsPivotRaw.fetched': 'داده خام پیوت سندها بازیابی شد',
    // پیام‌های سطوح جزئیات
    'detailLevels.list': 'سطوح جزئیات بازیابی شد',
    'detailLevels.fetchOne': 'سطح جزئیات بازیابی شد',
    'detailLevels.created': 'سطح جزئیات ایجاد شد',
    'detailLevels.updated': 'سطح جزئیات به‌روزرسانی شد',
    'detailLevels.deleted': 'سطح جزئیات حذف شد',
    'detailLevels.notFound': 'سطح جزئیات پیدا نشد',
    'detailLevels.duplicateCode': 'کد سطح جزئیات از قبل وجود دارد',
    'detailLevels.tree': 'درخت سطوح جزئیات ساخته شد',
    'detailLevels.specificRequired': "گره ریشه باید به کد 'اختصاصی' لینک شود",
    'detailLevels.rootOnlyLink': 'فقط گره‌های ریشه می‌توانند به کد اختصاصی لینک شوند',
    'detailLevels.cycle': 'تخصیص والد باعث چرخه می‌شود',
    'detailLevels.hasChildren': 'حذف ممکن نیست: گره فرزند دارد',
    'detailLevels.linkedExists': 'حذف ممکن نیست: این سطح جزئیات به جزئیات لینک شده است',
  },
} as const;

/**
 * Translate a message key to the selected language.
 */
export function t(key: keyof typeof dict['en'], lang: Lang = 'en'): string {
  const selected = dict[lang] || dict.en;
  return selected[key] || key;
}